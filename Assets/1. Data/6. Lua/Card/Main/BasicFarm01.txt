BasicFarm01 = class(CardBase,'BasicFarm01')
local this = BasicFarm01
--TODO:挂buff表现
function this:new()
  self.cardView = nil
  self.name = "农作物种植1"
  --self.frame = "CardFrame_0"
  self.image = "农作物种植1"
  self.desc = "本回合消耗2点矿石；1回合消耗2点人力，持续2回合；第2回合获得30点食物"
  self.inHand = false
end


function this:onPlay()
  if (GameManager.gameData.idleWorker >= 2 and GameManager.GetResource(ResourceType.Mine) >= 2)
  then
    GameManager.gameData.idleWorker = GameManager.gameData.idleWorker - 2
    GameManager.SubResource(ResourceType.Mine, 2)
    GameManager.CreateBuff(GameEvent.EnterMainPhase, BuffType.OneShot, 1, 
    function()
      GameManager.AddResource(ResourceType.Food, 30)
    end)
    GameManager.CreateBuff(GameEvent.EnterMainPhase, BuffType.OneShot, 2, 
    function()
      GameManager.gameData.idleWorker = GameManager.gameData.idleWorker - 2
    end)
    GameManager.Discard(self)
  else
    HandView:AddToHand(self.cardView)
  end
end
